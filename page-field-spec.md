# K12 教务管理系统 - 页面字段规范

> 最后更新：2026-02-19

## 1. 通用约定

### 1.1 主键与唯一标识
- 学生唯一键：学号（studentNo）
- 教师唯一键：工号（teacherNo）
- 姓名可重复，列表展示时需显示学号/工号区分

### 1.2 权限控制
- 菜单权限：控制菜单可见性
- 功能权限：控制按钮/操作可用性
- 数据范围：控制查询与写入范围

### 1.3 UI规范
- 弹窗样式：Glassmorphism（玻璃拟态）
- 按钮样式：主要/次要/危险
- 表格样式：固定表头、悬停高亮

---

## 2. 登录与认证

### 2.1 登录页
- **字段**：
  - 账号（account）：必填，支持学号/工号
  - 密码（password）：必填
- **按钮**：登录
- **接口**：`POST /api/auth/login`

### 2.2 当前用户信息
- **接口**：`GET /api/auth/me`
- **返回**：用户基本信息 + 角色 + 学生/教师信息

---

## 3. 组织管理

### 3.1 年级管理
- **列表字段**：
  - 年级名称（如 2024级）
  - 入学年份
  - 状态（在读/毕业）
- **操作**：新增、编辑、删除
- **接口**：`GET/POST/PATCH/DELETE /api/org/grades`

### 3.2 班级管理
- **列表字段**：
  - 班级名称
  - 年级
  - 班主任
  - 学生数
- **操作**：新增、编辑、删除、设置班主任
- **接口**：`GET/POST/PATCH/DELETE /api/org/classes`

---

## 4. 学生管理

### 4.1 学生列表
- **筛选**：年级、班级、搜索（学号/姓名）
- **列表字段**：
  - 姓名、学号、性别
  - 年级、班级
  - 宿舍（楼栋-房间-床位）
  - 走读/住校
  - 状态
- **操作**：新增、编辑、删除、导入、导出
- **接口**：`GET/POST/PATCH/DELETE /api/students`

### 4.2 学生详情
- **基本信息**：学号、姓名、性别、入学年份
- **班级信息**：年级、班级、座位号
- **宿舍信息**：楼栋、房间、床位、住宿类型
- **接口**：`GET /api/students/:id`

### 4.3 学生导入
- **必需列**：学号、姓名、性别、入学年份、年级、班级
- **可选列**：宿舍楼栋、房间、床位、座位号、身份证号
- **接口**：`POST /api/students/import`

---

## 5. 教师管理

### 5.1 教师列表
- **筛选**：搜索（工号/姓名）
- **列表字段**：
  - 姓名、工号
  - 授课班级（班级-科目）
  - 状态
- **操作**：新增、编辑、删除、设为班主任
- **接口**：`GET/POST/PATCH/DELETE /api/teachers`

### 5.2 教师详情
- **基本信息**：工号、姓名
- **授课信息**：班级列表（班级名称、年级、科目）
- **接口**：`GET /api/teachers/:id`

---

## 6. 用户管理

### 6.1 用户列表
- **筛选**：角色、状态、搜索（姓名/学号/工号）
- **列表字段**：
  - 姓名、账号
  - 角色
  - 学号/工号（根据角色显示）
  - 年级/班级（学生）
  - 状态
- **操作**：查看详情、启用/停用、重置密码、分配角色
- **接口**：`GET /api/users`

### 6.2 用户详情
- **基本信息**：账号、姓名、角色、状态
- **学生信息**：学号、年级、班级
- **教师信息**：工号、授课班级
- **数据权限**：年级范围、班级范围、学科范围
- **接口**：`GET /api/users/:id`

---

## 7. 宿舍管理

### 7.1 宿舍楼列表
- **列表字段**：
  - 楼栋名称
  - 楼层数
  - 房间数
  - 床位数
- **操作**：新增、编辑、删除
- **接口**：`GET/POST/PATCH/DELETE /api/dorms/buildings`

### 7.2 房间列表
- **筛选**：楼栋
- **列表字段**：
  - 房间号、楼层
  - 容量、已住、空床
  - 性别限制
- **接口**：`GET /api/dorms/rooms`

### 7.3 宿舍统计
- **统计项**：
  - 楼栋数、房间数、床位数
  - 已住床位、空床位
  - 入住率
  - 住校生数量
- **接口**：`GET /api/dorms/statistics`

---

## 8. 角色权限

### 8.1 角色列表
- **列表字段**：
  - 角色名称、角色代码
  - 描述
  - 权限数量
  - 是否系统角色
- **操作**：新增、编辑、删除、复制
- **接口**：`GET/POST/PATCH/DELETE /api/roles`

### 8.2 权限配置
- **菜单权限**：树形结构，勾选可见菜单
- **功能权限**：按菜单分组，勾选功能点
- **接口**：
  - `GET /api/roles/:id/permissions`
  - `POST /api/roles/:id/permissions`
  - `GET /api/roles/menus`

---

## 9. 数据权限

### 9.1 用户数据范围
- **选择用户**：下拉选择或搜索
- **年级范围**：多选年级
- **班级范围**：多选班级（可按年级过滤）
- **学科范围**：多选学科（仅教师）
- **学生特殊处理**：
  - 仅显示学生所属年级
  - 仅显示学生所属年级下的班级
  - 默认勾选学生年级和班级
  - 不显示学科选项
- **接口**：
  - `GET /api/datascopes/user/:userId`
  - `POST /api/datascopes/user/:userId`

---

## 10. 字典管理

### 10.1 科目管理
- **列表字段**：科目名称、科目代码、适用年级
- **操作**：新增、编辑、删除
- **接口**：`GET/POST/PATCH/DELETE /api/dict/subjects`

### 10.2 分段规则
- **列表字段**：规则名称、年级、科目、是否默认
- **接口**：`GET/POST/PATCH/DELETE /api/score-segments`

### 10.3 线位配置
- **列表字段**：线位名称、年级、类型、分数
- **接口**：`GET/POST/PATCH/DELETE /api/score-lines`
